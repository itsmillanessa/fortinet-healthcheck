<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FortiSASE Health Check Dashboard</title>
    <meta name="description" content="Herramienta de análisis y optimización de aprovechamiento de licencias FortiSASE">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .chart-bar {
            transition: all 0.3s ease;
        }
        .chart-bar:hover {
            opacity: 0.8;
        }
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #dc2626;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root" class="fade-in">
        <!-- Header -->
        <div class="bg-white shadow-sm border-b border-gray-200 mb-6">
            <div class="max-w-7xl mx-auto px-6 py-6">
                <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center">
                    <div>
                        <h1 class="text-3xl font-bold text-gray-900">🔍 FortiSASE Health Check - <span id="clientName">Demo Company</span></h1>
                        <p class="text-gray-600 mt-2">Herramienta de análisis y optimización de aprovechamiento de licencias FortiSASE</p>
                    </div>
                    <div class="flex gap-3 mt-4 lg:mt-0">
                        <button onclick="toggleConfig()" class="flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors">
                            ⚙️ Configurar
                        </button>
                        <button onclick="exportData()" class="flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors">
                            📥 Exportar
                        </button>
                        <button onclick="window.open('https://github.com/itsmillanessa/fortinet-healthcheck', '_blank')" class="flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                            💬 GitHub
                        </button>
                    </div>
                </div>
                
                <div class="mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <svg class="h-5 w-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                            </svg>
                        </div>
                        <div class="ml-3">
                            <h3 class="text-sm font-medium text-blue-800">🚀 Herramienta Open Source - Completamente Funcional</h3>
                            <div class="mt-2 text-sm text-blue-700">
                                <p>Dashboard interactivo con datos demo. ¡Totalmente funcional y listo para usar!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Executive Summary -->
        <div class="max-w-7xl mx-auto px-6 mb-8">
            <div class="bg-gradient-to-r from-red-600 to-red-800 rounded-xl shadow-lg p-8 text-white">
                <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold">Resumen Ejecutivo FortiSASE</h2>
                        <p class="text-red-100 mt-1">Estado general del aprovechamiento de licencias</p>
                    </div>
                    <div class="text-right mt-4 lg:mt-0">
                        <div class="text-3xl font-bold" id="totalUtilization">77%</div>
                        <div class="text-red-100 text-sm">Aprovechamiento Global</div>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="bg-white bg-opacity-15 rounded-lg p-6 hover:bg-opacity-20 transition-all">
                        <div class="flex items-center justify-between mb-4">
                            <svg class="h-10 w-10 text-red-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                            </svg>
                            <div class="text-right">
                                <div class="text-2xl font-bold">1,661</div>
                                <div class="text-red-200 text-sm">Licencias Totales</div>
                            </div>
                        </div>
                        <div class="text-sm">Activas: 1,309</div>
                    </div>

                    <div class="bg-white bg-opacity-15 rounded-lg p-6 hover:bg-opacity-20 transition-all">
                        <div class="flex items-center justify-between mb-4">
                            <svg class="h-10 w-10 text-gray-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                            </svg>
                            <div class="text-right">
                                <div class="text-2xl font-bold">2/5</div>
                                <div class="text-red-200 text-sm">Funcionalidades Activas</div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white bg-opacity-15 rounded-lg p-6 hover:bg-opacity-20 transition-all">
                        <div class="flex items-center justify-between mb-4">
                            <svg class="h-10 w-10 text-amber-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
                            </svg>
                            <div class="text-right">
                                <div class="text-2xl font-bold">$170,391</div>
                                <div class="text-red-200 text-sm">Inversión Anual</div>
                            </div>
                        </div>
                        <div class="text-sm">Desperdiciado: $39,258</div>
                    </div>

                    <div class="bg-white bg-opacity-15 rounded-lg p-6 hover:bg-opacity-20 transition-all">
                        <div class="flex items-center justify-between mb-4">
                            <svg class="h-10 w-10 text-amber-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                            </svg>
                            <div class="text-right">
                                <div class="text-2xl font-bold">23.0%</div>
                                <div class="text-red-200 text-sm">Oportunidad Mejora</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Simple Chart -->
        <div class="max-w-7xl mx-auto px-6 mb-8">
            <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">📊 Aprovechamiento por Funcionalidad</h3>
                <div class="space-y-4">
                    <div class="flex items-center">
                        <div class="w-32 text-sm font-medium text-gray-600">SIA</div>
                        <div class="flex-1 bg-gray-200 rounded-full h-6 ml-4">
                            <div class="chart-bar bg-red-600 h-6 rounded-full" style="width: 100%"></div>
                        </div>
                        <div class="w-16 text-right text-sm font-bold text-gray-900 ml-4">100%</div>
                    </div>
                    <div class="flex items-center">
                        <div class="w-32 text-sm font-medium text-gray-600">SPA</div>
                        <div class="flex-1 bg-gray-200 rounded-full h-6 ml-4">
                            <div class="chart-bar bg-yellow-500 h-6 rounded-full" style="width: 78%"></div>
                        </div>
                        <div class="w-16 text-right text-sm font-bold text-gray-900 ml-4">78%</div>
                    </div>
                    <div class="flex items-center">
                        <div class="w-32 text-sm font-medium text-gray-600">SWG</div>
                        <div class="flex-1 bg-gray-200 rounded-full h-6 ml-4">
                            <div class="chart-bar bg-red-600 h-6 rounded-full" style="width: 100%"></div>
                        </div>
                        <div class="w-16 text-right text-sm font-bold text-gray-900 ml-4">100%</div>
                    </div>
                    <div class="flex items-center">
                        <div class="w-32 text-sm font-medium text-gray-600">CASB</div>
                        <div class="flex-1 bg-gray-200 rounded-full h-6 ml-4">
                            <div class="chart-bar bg-red-500 h-6 rounded-full" style="width: 48%"></div>
                        </div>
                        <div class="w-16 text-right text-sm font-bold text-gray-900 ml-4">48%</div>
                    </div>
                    <div class="flex items-center">
                        <div class="w-32 text-sm font-medium text-gray-600">DLP</div>
                        <div class="flex-1 bg-gray-200 rounded-full h-6 ml-4">
                            <div class="chart-bar bg-yellow-500 h-6 rounded-full" style="width: 60%"></div>
                        </div>
                        <div class="w-16 text-right text-sm font-bold text-gray-900 ml-4">60%</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Features List -->
        <div class="max-w-7xl mx-auto px-6 mb-8">
            <div class="bg-white rounded-lg shadow-sm border border-gray-200">
                <div class="p-6 border-b border-gray-200">
                    <h3 class="text-lg font-semibold text-gray-900">Resumen de Funcionalidades FortiSASE</h3>
                </div>
                <div class="p-6 space-y-4" id="featuresList">
                    <!-- Features will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="max-w-7xl mx-auto px-6 pb-8">
            <div class="text-center text-gray-500">
                <p class="mb-2">Made with ❤️ for the Cybersecurity Community</p>
                <p class="text-sm">
                    <a href="https://github.com/itsmillanessa/fortinet-healthcheck" target="_blank" class="text-blue-600 hover:text-blue-700">
                        View on GitHub
                    </a> | Esta herramienta es independiente y no está afiliada oficialmente con Fortinet Inc.
                </p>
            </div>
        </div>
    </div>

    <!-- Config Panel (Hidden by default) -->
    <div id="configPanel" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50" onclick="toggleConfig()">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-lg max-w-2xl w-full max-h-96 overflow-y-auto" onclick="event.stopPropagation()">
                <div class="p-6">
                    <h2 class="text-xl font-bold text-gray-900 mb-4">⚙️ Configuración del Cliente</h2>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Nombre del Cliente</label>
                            <input type="text" id="clientNameInput" placeholder="Ingrese nombre del cliente" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500">
                        </div>
                        <div class="flex justify-end space-x-3 pt-4">
                            <button onclick="toggleConfig()" class="px-4 py-2 text-gray-600 hover:text-gray-800">Cancelar</button>
                            <button onclick="saveConfig()" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">Guardar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Dashboard data and functionality
        const featuresData = [
            { id: 'sia', name: 'Secure Internet Access (SIA)', utilizationRate: 100, status: 'active', licensesActive: 387, licensesRequired: 387, costPerLicense: 90 },
            { id: 'spa', name: 'Secure Private Access (SPA)', utilizationRate: 78, status: 'partial', licensesActive: 156, licensesRequired: 200, costPerLicense: 117 },
            { id: 'swg', name: 'Secure Web Gateway (SWG)', utilizationRate: 100, status: 'active', licensesActive: 387, licensesRequired: 387, costPerLicense: 90 },
            { id: 'casb', name: 'Cloud Access Security Broker (CASB)', utilizationRate: 48, status: 'partial', licensesActive: 145, licensesRequired: 300, costPerLicense: 117 },
            { id: 'dlp', name: 'Data Loss Prevention (DLP)', utilizationRate: 60, status: 'partial', licensesActive: 234, licensesRequired: 387, costPerLicense: 117 }
        ];

        function getStatusIcon(status) {
            const icons = {
                'active': '✅',
                'partial': '⚠️',
                'inactive': '❌'
            };
            return icons[status] || '❓';
        }

        function getStatusColor(status) {
            const colors = {
                'active': 'bg-green-100 text-green-800 border-green-200',
                'partial': 'bg-yellow-100 text-yellow-800 border-yellow-200',
                'inactive': 'bg-red-100 text-red-800 border-red-200'
            };
            return colors[status] || 'bg-gray-100 text-gray-800 border-gray-200';
        }

        function renderFeatures() {
            const featuresList = document.getElementById('featuresList');
            featuresList.innerHTML = featuresData.map(feature => `
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                    <div class="flex items-center space-x-4">
                        <span class="text-xl">${getStatusIcon(feature.status)}</span>
                        <div>
                            <h4 class="font-medium text-gray-900">${feature.name}</h4>
                            <p class="text-sm text-gray-600">${feature.licensesActive}/${feature.licensesRequired} licencias activas</p>
                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(feature.status)}">
                                ${feature.status === 'active' ? 'Activa' : feature.status === 'partial' ? 'Parcial' : 'Inactiva'}
                            </span>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-lg font-bold text-gray-900">${feature.utilizationRate}%</div>
                        <div class="text-sm text-red-600">$${(feature.licensesRequired * feature.costPerLicense).toLocaleString()}/año</div>
                    </div>
                </div>
            `).join('');
        }

        function toggleConfig() {
            const panel = document.getElementById('configPanel');
            panel.classList.toggle('hidden');
        }

        function saveConfig() {
            const clientName = document.getElementById('clientNameInput').value;
            if (clientName) {
                document.getElementById('clientName').textContent = clientName;
                localStorage.setItem('fortisase-client-name', clientName);
            }
            toggleConfig();
        }

        function exportData() {
            const data = {
                generatedAt: new Date().toISOString(),
                clientName: document.getElementById('clientName').textContent,
                features: featuresData,
                summary: {
                    totalUtilization: 77,
                    totalLicenses: 1661,
                    activeLicenses: 1309,
                    totalCost: 170391,
                    wastedCost: 39258
                }
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `fortisase-report-${Date.now()}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            renderFeatures();
            
            // Load saved client name
            const savedClientName = localStorage.getItem('fortisase-client-name');
            if (savedClientName) {
                document.getElementById('clientName').textContent = savedClientName;
                document.getElementById('clientNameInput').value = savedClientName;
            }
        });
    </script>
</body>
</html>
